"use strict";const e={"(":6,"!":5,"&":4,"|":3,"-":2,"=":1};function p(e,p){if("!"!==e&&p.length<2)throw new Error("无效的表达式");let o="";if("!"===e){const e=p.pop();o=+!Number(e)}if("&"===e){const e=p.pop(),r=p.pop();o=Number(e)&&Number(r)}if("|"===e){const e=p.pop(),r=p.pop();o=Number(e)||Number(r)}if("-"===e){const e=p.pop(),r=p.pop();o=+!Number(r)||Number(e)}if("="===e){const e=p.pop(),r=p.pop();o=Number(e)===Number(r)}return o.toString()}exports.calc=function(o,r){let t=Object.keys(r),n=o;return t.forEach((e=>{n=n.replace(new RegExp(e,"g"),r[e])})),+function(o){const r=[],t=[];for(let n of o)if("0"===n||"1"===n)r.push(n);else if(")"!==n)if(0===t.length)t.push(n);else{const o=t[t.length-1];if("("!==o&&e[o]>=e[n]){const e=p(o,r);r.push(e),t.pop()}t.push(n)}else{for(;"("!==t[t.length-1];){const e=p(t.pop(),r);r.push(e)}t.pop()}for(;0!==t.length;){const e=p(t.pop(),r);r.push(e)}if(r.length>1)throw new Error("无效的表达式");return r[0]}(n)},exports.parse=function(e){return e=(e=(e=(e=(e=e.replace(/¬/g,"!")).replace(/⋀/g,"&")).replace(/⋁/g,"|")).replace(/→/g,"-")).replace(/↔/g,"=")};
